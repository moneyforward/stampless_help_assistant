name: Git Update Notification

on:
  workflow_run:
    workflows: ["Daily Git Update"]
    types: [completed]

jobs:
  notify:
    runs-on: ubuntu-latest
    if: ${{ github.event.workflow_run.conclusion == 'success' }}

    steps:
    - name: é€šçŸ¥ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
      run: |
        echo "# ğŸ”” stampless-help-assistant Gitæ›´æ–°é€šçŸ¥ - $(date '+%Yå¹´%mæœˆ%dæ—¥ %H:%M')" > update_notification.md
        echo "" >> update_notification.md
        echo "## âœ… ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªæ›´æ–°å®Œäº†" >> update_notification.md
        echo "" >> update_notification.md
        echo "**æ›´æ–°ã•ã‚ŒãŸãƒªãƒã‚¸ãƒˆãƒª**: stampless-help-assistant" >> update_notification.md
        echo "**å®Ÿè¡Œæ™‚åˆ»**: $(date '+%Yå¹´%mæœˆ%dæ—¥ %H:%M:%S')" >> update_notification.md
        echo "" >> update_notification.md
        echo "## ğŸ“‹ ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã¸" >> update_notification.md
        echo "" >> update_notification.md
        echo "ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã®æ›´æ–°ã‚’ãŠå¿˜ã‚Œãªãï¼" >> update_notification.md
        echo "" >> update_notification.md
        echo "### æ›´æ–°å†…å®¹" >> update_notification.md
        echo "- Node.jsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¾å­˜é–¢ä¿‚æ›´æ–°" >> update_notification.md
        echo "- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã®ç¢ºèª" >> update_notification.md
        echo "- ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œãƒ†ã‚¹ãƒˆ" >> update_notification.md
        echo "" >> update_notification.md
        echo "### æ›´æ–°æ–¹æ³•" >> update_notification.md
        echo "- Cursor: \`Tasks: Run Task\` â†’ \`Git ãƒªãƒã‚¸ãƒˆãƒªæ›´æ–°\`" >> update_notification.md
        echo "- ã‚¿ãƒ¼ãƒŸãƒŠãƒ«: \`./pull_all_repos.sh\`" >> update_notification.md
        echo "- æ‰‹å‹•: \`git pull\`" >> update_notification.md

    - name: é€šçŸ¥ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
      uses: actions/upload-artifact@v4
      with:
        name: stampless-git-update-notification
        path: update_notification.md

    - name: ã‚³ãƒ³ã‚½ãƒ¼ãƒ«é€šçŸ¥
      run: |
        echo "ğŸ‰ stampless-help-assistant ã®GitHub Actionsã«ã‚ˆã‚‹è‡ªå‹•æ›´æ–°ãŒå®Œäº†ã—ã¾ã—ãŸï¼"
        echo "ğŸ“¦ ãƒªãƒã‚¸ãƒˆãƒª: stampless-help-assistant"
        echo "ğŸ“… å®Ÿè¡Œæ™‚åˆ»: $(date '+%Yå¹´%mæœˆ%dæ—¥ %H:%M:%S')"
        echo ""
        echo "ğŸ’¡ ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã®æ–¹ã¯ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã®æ›´æ–°ã‚’ãŠé¡˜ã„ã—ã¾ã™ï¼"
        echo "   Cursorã‚¿ã‚¹ã‚¯ã¾ãŸã¯ ./pull_all_repos.sh ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚"
        echo ""
        echo "ğŸ“‹ æ›´æ–°ã•ã‚ŒãŸå†…å®¹:"
        echo "   - Node.jsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¾å­˜é–¢ä¿‚"
        echo "   - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã®ç¢ºèª"
        echo "   - ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œãƒ†ã‚¹ãƒˆ"
