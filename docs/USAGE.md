# 🚀 会社名入力→自動情報取得→最終アウトプット機能

## 概要
会社名を入力するだけで、顧客の事業者情報を自動取得し、help_request_assistantルールが最終的な問い合わせ対応結果をアウトプットする機能です。

## 🎯 使用方法

### **1. 基本的な使い方**
Cursorで以下のように入力するだけです：

```
株式会社サンプルで契約書のダウンロードができません。
エラーメッセージも表示されず、何も起こらない状態です。
```

### **2. 自動実行される処理**
1. **事業者情報の自動検出**: 「株式会社サンプル」を自動検出
2. **情報取得スクリプト実行**: `node scripts/customer-lookup.js "株式会社サンプル"`
3. **顧客情報自動取得**: 事業者名、事業者No、支払い方法等を取得
4. **help_request_assistant ルール適用**: 仕様・不具合の自動判定
5. **最終アウトプット生成**: お客様向け回答文と不具合報告テンプレート

### **3. 対応する入力パターン**

#### **会社名パターン**
- 「株式会社○○で」
- 「有限会社○○の件で」  
- 「合同会社○○から」

#### **ID指定パターン**
- 「office_id 12345で」
- 「オフィスID：12345の」
- 「tenant_uid 67890で」

#### **識別コードパターン**
- 「識別コード ABC123で」
- 「事業者番号 1234567890123で」

## 📋 出力例

### **自動取得される顧客情報**
```markdown
# 🏢 顧客情報 - 株式会社サンプル

## 📋 基本情報（自動取得済み）
- 事業者名: 株式会社サンプル
- 事業者No (tenant_uid): 67890
- Office ID: 12345
- 事業者番号: 1234567890123
- プラン名: Midプラン
- 支払い方法: クレジットカード
```

### **問い合わせ分析結果**
```markdown
● 問題の切り分け：不具合
● 現状：契約書ダウンロード機能でファイル保存ができない状況
● 回避策：代行ダウンロードによる一時対応が可能
● 根拠：
  • コード: download_handler.go の mime-type 設定に問題あり
```

### **不具合報告テンプレート（自動入力済み）**
```markdown
• 不具合レベル: レベル3（中程度）
• 事業者名: 株式会社サンプル
• 事業者No: 67890
• Office ID: 12345
• 事象：契約書ダウンロードボタンでファイルが保存されない
• 正しい挙動：ダウンロードダイアログが表示されファイル保存される
```

## 🔧 高度な使用方法

### **手動での情報取得**
スクリプトを直接実行して情報確認も可能：

```bash
# ターミナルで実行
cd /Users/sudo.ryota/Documents/workspace/stampless_help_assistant
node scripts/customer-lookup.js "株式会社サンプル"
```

### **複数顧客の一括確認**
```bash
# 複数の顧客情報を一括取得
node scripts/customer-lookup.js "12345"
node scripts/customer-lookup.js "12346" 
node scripts/customer-lookup.js "12347"
```

## 📁 出力ファイル

### **自動保存される場所**
- `output/customer-info-{timestamp}.md`: 顧客情報取得結果
- Cursorチャット上にリアルタイム表示

### **ファイル例**
```
stampless_help_assistant/
├── output/
│   ├── customer-info-2025-01-10T10-30-00.md
│   └── customer-info-2025-01-10T11-15-00.md
└── scripts/
    └── customer-lookup.js
```

## 🎯 活用シーン

### **CSチームでの利用**
1. **日常の問い合わせ対応**
   - 顧客から連絡 → 会社名入力 → 即座に全情報表示
   
2. **緊急障害対応**
   - office_id入力 → 顧客情報+技術情報を一括取得

### **営業チームでの利用**  
1. **商談中の技術質問**
   - 「APIについて教えて」→ 自動で仕様書+図解生成
   
2. **契約状況確認**
   - 会社名入力 → プラン・支払い方法を即座に確認

### **エンジニアチームでの利用**
1. **デバッグ支援**
   - ログの office_id → 顧客情報+システム状況を一括表示
   
2. **仕様確認**
   - 問い合わせ内容 → 仕様・バグを自動判定

## ⚠️ 注意事項

### **現在の制限**
- **模擬データ使用中**: 実際のDB接続は次フェーズで実装
- **対象顧客**: サンプルとして3社のデータのみ登録済み

### **実データ接続時の準備**
- stampless_backend の API エンドポイント設定
- ERPWeb API の認証情報設定
- DB接続権限の取得

## 🚀 次のステップ

1. **今すぐテスト**: サンプルデータで動作確認
2. **実データ接続**: APIキー設定で本格運用
3. **機能拡張**: 他の業務フローにも適用

---

**準備完了！会社名を入力して試してみてください 🎉**
